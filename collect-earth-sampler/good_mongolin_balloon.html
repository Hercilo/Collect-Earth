<!DOCTYPE html>
<html>
<head>
<title>Test Form</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="files/jquery/jquery.js"></script>
<script src="files/jquery/jquery-ui.js"></script>
<script src="files/jquery/jquery.blockUI.js"></script>
<script src="files/bootstrap/bootstrap.min.js"></script>
<script src="files/bootstrap/bootstrap-select.js"></script>

<link href="files/jquery/jquery-ui.css" rel="stylesheet" />
<link href="files/bootstrap/bootstrap.css" rel="stylesheet" />
<link href="files/bootstrap/bootstrap-select.css" rel="stylesheet" />


<script>
	var collapsedState = false;

	var fillYears = function() {

		for (year = new Date().getFullYear(); year > 1950; year--) {
			$('#humanImpactTime').append( $("<option></option>").attr("value", year).text( year) );
		}
	}

	var toggleCollapsed = function() {
		if (collapsedState == false) {
			$('#collapsableContents').hide();
			$('#collapseButton').attr("class", "icon-large icon-resize-full");
			
			collapsedState = true;
		} else {
			$('#collapsableContents').show();
			$('#collapseButton').attr("class", "icon-large icon-resize-small");
			collapsedState = false;
		}
	        
		document.getElementById('dummy').src = "about:blank";
	}

	var forceWindowCloseAfterDialogCloses = function($dialog) {
		$dialog.on("dialogclose", function(event, ui) {
			window.open("#$[next_id];balloonFlyto");
			
		});
	}

	var checkIfPlacemarkAlreadyFilled = function(formName) {

		data = $( formName + " :input[value]").serialize();

		$.ajax({
					data : data,
					type : "POST",
					url : "http://localhost:8093/eye/placemarkInfo",
					dataType : 'json',
					error : function(jqXHR, textStatus, errorThrown) {
						$('#succ_mess').css("color", "red").html( "The data server is not running!");
						$("#dialogSuccess").dialog( "open" );
					},
					success : function(json) {
						if (json.type == 'success') {
							$('#succ_mess').css("color", "red").html( "The data for this placemark has already been filled");
							$("#dialogSuccess").dialog( "open" );
							forceWindowCloseAfterDialogCloses($("#dialogSuccess"));
						}

					}
				});
	}

	$(document).ready(
					function() {

					
						$('a[data-toggle="tab"]').on('shown', function(e) {
							var selectedTab = e.target;
							var idSelected = selectedTab.name;
							$("input[id=type_of_terrain]").val(idSelected);

						});

						$('#forestType').change(function() {
							var idSelected = $(this).attr("id");
							$("input[id=type_of_forest]").val(idSelected);
							$("#crownCoverDiv").show();
						});

						$('#radioCrown').change(function() {
							var idSelected = $(this).attr("id");
							$("input[id=crown_cover]").val(idSelected);
							$("#imageResolutionDiv").show();
						});

						fillYears();
						
						
						 $( "#dialogSuccess" ).dialog({
							 modal: true,
							 autoOpen: false,
							 buttons: {
							 	Ok: function() {
									 $( this ).dialog( "close" );
							 	}
							 }
						});
						
						$('.selectpicker').selectpicker();

						$("#crownCoverDiv").hide();
						
						$("#elements").change( function(){
							// START HERE
						});
						

						$('#formAll').submit(
										function(e) {
											e.preventDefault();
											var $form = $(this);
						
											var data = $( "#formAll :input[value]").serialize();

											$.blockUI({
												message : 'Sumitting data..'
											});
											// unblock when ajax activity stops 
											$(document).ajaxStop($.unblockUI);

											$.ajax({
														data : data,
														type : $form
																.attr("method"),
														url : $form
																.attr("action"),
														dataType : 'json',
														error : function(jqXHR,
																textStatus,
																errorThrown) {
															$('#succ_mess')
																	.css("color","red")
																	.html("Cannot save the data, the data server is not running!");
															$("#dialogSuccess").dialog( "open" );
														},
														success : function(json) {
															if (json.type == 'success') {
																$('#succ_mess')
																		.css("color","green")
																		.html(json.message);
																forceWindowCloseAfterDialogCloses($("#dialogSuccess"));
															} else if (json.type == 'warning') {
																$('#succ_mess')
																		.css("color","yellow")
																		.html(json.message);
															} else if (json.type == 'error') {
																$('#succ_mess')
																		.css("color","red")
																		.html(json.message);
															}
															$("#dialogSuccess").dialog( "open" );
														}
													});
										});
						
						checkIfPlacemarkAlreadyFilled('#formAll');
						
						
					});
</script>
<style type="text/css">
body {
	font-family: "Trebuchet MS", "Helvetica", "Arial", "Verdana",
		"sans-serif";
	/* 	font-size: 62.5%; */
	

/* 	background-image:url('./files/img/mongolia.png'); */
/* 	background-repeat:no-repeat; */
/* 	background-position:right top; */
/* 	margin-right:200px; */

}

.selectDiv {
	border: 2px solid #5F5D69;
	border-top-left-radius: 6px;
	border-top-right-radius: 6px;
	width: 95%;
	margin-left: 3px;
}

.selectDiv h2 {
	padding: 2px;
	color: #5F5D69;
	line-height: 20px;
	background-color: #F6F5FF;
	font-size: 8pt; /* or whatever */
	margin-bottom: 10px;
	margin-top: 5px;
}

.lowerDivs {
	position: relative !important;
	display: inline-block !important;
	float: left;
	width: 95%;
	margin-left: 3px;
}

.add-on {
	width: 100px !important;
}

.input-prepend .add-on, .input-prepend .btn {
    margin-left: 4px;
}

label {
	display: inline;
}

hr {
	margin: 5px;
}


.bootstrap-select:not([class*="span"]) {
    width: 170px;
}

.bootstrap-select {
    width: 170px\9; /*IE8 and below*/
}

</style>

</head>

	<div id="dialogSuccess">
		
			<span class="ui-icon ui-icon-circle-check"
				style="float: left; margin: 0 7px 50px 0;"> </span>
			<div id="succ_mess"></div>
		
	</div>
	
<body>


	<div id="contentDiv" style="width: 450px">

			<form id="formAll" method="POST" action="http://localhost:8093/eye/saveData">

				<input type="hidden" id="type_of_terrain" name="type_of_terrain"
					value="" /> 
				<input type="hidden" id="type_of_forest"
					name="type_of_forest" value="" /> 
				<input type="hidden"
					id="crown_cover" name="crown_cover" value="" /> 
				<input
					type="hidden" id="longitude" name="longitude" value="$[longitude]" />
				<input type="hidden" id="latitude" name="latitude"
					value=" $[latitude]" /> 
				<input type="hidden" id="gePlacemarkId"
					name="gePlacemarkId" value="$[id]" />


				<button class="btn btn-link" onclick="toggleCollapsed(); return false;"><i  class="icon-large icon-resize-small" id="collapseButton"></i></button>
				<span style="align: right;">LAND USE TYPE <img src="files/img/mongolia.png" border="0" style="margin:5px;"/></span>

				<div id="collapsableContents">
					<div id="tabsTypeOfTerrain">
	
						<ul class="nav nav-tabs">
							<li class="active"><a href="#tabsForest" name="forest"
								data-toggle="tab">Forest</a></li>
							<li><a href="#tabsCropland" name="cropland" data-toggle="tab">Cropland</a></li>
							<li><a href="#tabsGrassland" name="grassland"
								data-toggle="tab">Grassland</a></li>
							<li><a href="#tabsWetland" name="wetland" data-toggle="tab">Wetland</a></li>
							<li><a href="#tabsSettlement" name="settlement"
								data-toggle="tab">Settlement</a></li>
							<li><a href="#tabsOther" name="other" data-toggle="tab">Other
									land</a></li>
							<!-- 	 // removed class container  -->
							
						</ul>
					</div>

					<div class="tab-content">
						<div id="tabsForest" class="tab-pane active">

							<div id="forestTypeDiv" class="selectDiv ">
								<h2>Forest Type</h2>
								<div class="control-group">
									<table style="width:100%;align:middle">
									<tr><td align="center">
									<div class="btn-group" data-toggle="buttons-radio" >
										<button type="button" class="btn btn-primary  btn-small" id="FLtoFL"
											name="radioCrown">FL &gt; FL</button>
										<button type="button" class="btn btn-primary btn-small" id="FLtoOT">FL &gt; Other</button>
									</div>
									</td></tr>
									</table>
									<hr />
									<div class="input-prepend">
										<span class="add-on">Forest Type</span> <select
											class="selectpicker  show-tick show-menu-arrow "
											id="forestType" title="No accesibility selected" data-container=".tab-content">
											<optgroup label="FL > FL" disabled id="flToFlGroup">
												<option >Birch-Aspen</option>
												<option>Larch</option>
												<option>Pine</option>
												<option>Siberian Pine</option>
												<option>Spruce</option>
												<option>Saxaul</option>
											</optgroup>
											<optgroup label="OL > FL" id="otToFlGroup">
												<option>Coniferous and deciduous</option>
												<option>Saxaul</option>
												<option>Shrubs</option>
												<option>Open</option>
											</optgroup>
										</select>
									</div>
								</div>

							</div>

							<div id="crownCoverDiv" class="selectDiv">
								<h2>Crown Cover</h2>
								<div class="input-prepend">
									<span class="add-on">Cover</span> <select
										class="selectpicker  show-tick show-menu-arrow "
										id="crownCover" title="No cover selected" data-container=".tab-content">
										<option>10-30%</option>
										<option>30-50%</option>
										<option>50-70%</option>
										<option>70-100%</option>
									</select>

								</div>
							</div>
						</div>

						<div id="tabsCropland" class="tab-pane">
							<h2>Content heading 2</h2>
							<p class="text-error">dsfdsfs</p>
							<span class="label label-warning">Warning</span> <a
								href="#ge_1;flyto" id="flyBack"> Back to start - DO NOT
								REMOVE</a><br /> <a href="#ge_1;balloonFlyto">Fly to balloon</a><br />
							<a href="#" onclick="window.open('#ge_1;balloonFlyto')">Fly
								to balloon2</a><br />

							<div class="alert">
								<button type="button" class="close" data-dismiss="alert">&times;</button>
								<strong>Warning!</strong> Best check yo self, you're not looking
								too good.
							</div>
							<p>Morbi tincidunt, dui sit amet facilisis feugiat, odio
								metus gravida ante, ut pharetra massa metus id nunc. Duis
								scelerisque molestie turpis. Sed fringilla, massa eget luctus
								malesuada, metus eros molestie lectus, ut tempus eros massa ut
								dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in
								ligula suscipit aliquam. Praesent in eros vestibulum mi
								adipiscing adipiscing. Morbi facilisis. Curabitur ornare
								consequat nunc. Aenean vel metus. Ut posuere viverra nulla.
								Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat,
								tellus pellentesque pretium posuere, felis lorem euismod felis,
								eu ornare leo nisi vel felis. Mauris consectetur tortor et
								purus.</p>
						</div>
						<div id="tabsOther" class="tab-pane">
							<h2>Content heading 3</h2>
							<p>Mauris eleifend est et turpis. Duis id erat. Suspendisse
								potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque
								rutrum erat, eu congue orci lorem eget lorem. Vestibulum non
								ante. Class aptent taciti sociosqu ad litora torquent per
								conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque
								eu urna vel enim commodo pellentesque. Praesent eu risus
								hendrerit ligula tempus pretium. Curabitur lorem enim, pretium
								nec, feugiat nec, luctus a, lacus.</p>
							<p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra
								at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent
								viverra justo vitae neque. Praesent blandit adipiscing velit.
								Suspendisse potenti. Donec mattis, pede vel pharetra blandit,
								magna ligula faucibus eros, id euismod lacus dolor eget odio.
								Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut
								sagittis. Donec nisi lectus, feugiat porttitor, tempor ac,
								tempor vitae, pede. Aenean vehicula velit eu tellus interdum
								rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus.
								Vivamus a libero vitae lectus hendrerit hendrerit.</p>
						</div>
						<div id="tabsGrassland" class="tab-pane">
							<h2>Content heading 3</h2>
							<p>Mauris eleifend est et turpis. Duis id erat. Suspendisse
								potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque
								rutrum erat, eu congue orci lorem eget lorem. Vestibulum non
								ante. Class aptent taciti sociosqu ad litora torquent per
								conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque
								eu urna vel enim commodo pellentesque. Praesent eu risus
								hendrerit ligula tempus pretium. Curabitur lorem enim, pretium
								nec, feugiat nec, luctus a, lacus.</p>
							<p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra
								at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent
								viverra justo vitae neque. Praesent blandit adipiscing velit.
								Suspendisse potenti. Donec mattis, pede vel pharetra blandit,
								magna ligula faucibus eros, id euismod lacus dolor eget odio.
								Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut
								sagittis. Donec nisi lectus, feugiat porttitor, tempor ac,
								tempor vitae, pede. Aenean vehicula velit eu tellus interdum
								rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus.
								Vivamus a libero vitae lectus hendrerit hendrerit.</p>
						</div>
						<div id="tabsWetland" class="tab-pane">
							<h2>Content heading 3</h2>
							<p>Mauris eleifend est et turpis. Duis id erat. Suspendisse
								potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque
								rutrum erat, eu congue orci lorem eget lorem. Vestibulum non
								ante. Class aptent taciti sociosqu ad litora torquent per
								conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque
								eu urna vel enim commodo pellentesque. Praesent eu risus
								hendrerit ligula tempus pretium. Curabitur lorem enim, pretium
								nec, feugiat nec, luctus a, lacus.</p>
							<p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra
								at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent
								viverra justo vitae neque. Praesent blandit adipiscing velit.
								Suspendisse potenti. Donec mattis, pede vel pharetra blandit,
								magna ligula faucibus eros, id euismod lacus dolor eget odio.
								Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut
								sagittis. Donec nisi lectus, feugiat porttitor, tempor ac,
								tempor vitae, pede. Aenean vehicula velit eu tellus interdum
								rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus.
								Vivamus a libero vitae lectus hendrerit hendrerit.</p>
						</div>
						<div id="tabsSettlement" class="tab-pane">
							<h2>Content heading 3</h2>
							<p>Mauris eleifend est et turpis. Duis id erat. Suspendisse
								potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque
								rutrum erat, eu congue orci lorem eget lorem. Vestibulum non
								ante. Class aptent taciti sociosqu ad litora torquent per
								conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque
								eu urna vel enim commodo pellentesque. Praesent eu risus
								hendrerit ligula tempus pretium. Curabitur lorem enim, pretium
								nec, feugiat nec, luctus a, lacus.</p>
							<p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra
								at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent
								viverra justo vitae neque. Praesent blandit adipiscing velit.
								Suspendisse potenti. Donec mattis, pede vel pharetra blandit,
								magna ligula faucibus eros, id euismod lacus dolor eget odio.
								Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut
								sagittis. Donec nisi lectus, feugiat porttitor, tempor ac,
								tempor vitae, pede. Aenean vehicula velit eu tellus interdum
								rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus.
								Vivamus a libero vitae lectus hendrerit hendrerit.</p>
						</div>

					</div>



					<div id="commonDivs">
						<div id="topographyDiv" class="selectDiv lowerDivs">
							<h2>Topography</h2>
							<div class="input-prepend">
								<span class="add-on">Accesibility</span> <select
									class="selectpicker  show-tick show-menu-arrow "
									id="accesibility" title="No accesibility selected">
									<option>D&lt;1km</option>
									<option>1km&lt;D&lt;5km</option>
									<option>5km&lt;D&lt;10km</option>
									<option>10km&lt;D</option>
								</select>
							</div>
							<hr />
							<div class="input-prepend">
								<span class="add-on">Elements</span> <select
									class="selectpicker show-tick show-menu-arrow " multiple
									id="elements" title="No element selected">
									<option>Road</option>
									<option>River</option>
									<option>House</option>
									<option>Other</option>
								</select>
								<select
									class="selectpicker show-tick show-menu-arrow " disabled
									id="elementsCover" title="No cover selected" data-width="110px">
									<option>0-10%</option>
									<option>10%-30%</option>
									<option>30%-50%</option>
									<option>50%-75%</option>
									<option>&gt; 75%</option>
								</select>
							</div>
						</div>

						<div id="humanImpactDiv" class="selectDiv lowerDivs">
							<h2>Human impact</h2>

							<div class="input-prepend">
								<span class="add-on">Type</span> <select
									class="selectpicker  show-menu-arrow show-tick"
									id="humanImpactType" multiple
									data-selected-text-format="count>3" title="No type selected">
									<option>Logging</option>
									<option>Fire</option>
									<option>Grazzing</option>
									<option>Mining</option>
									<option>Other</option>
								</select>
								
							</div>
							<HR />
							<div class="input-prepend">
								<span class="add-on">Grade</span> <select
									class="selectpicker  show-menu-arrow show-tick"
									id="humanImpactGrade" title="No grade selected">
									<option>Low</option>
									<option>Medium</option>
									<option>High</option>
								</select>
							</div>
							<HR />
							<div class="input-prepend">
								<span class="add-on">Time</span> <select
									class="selectpicker  show-menu-arrow show-tick" data-size="3"
									id="humanImpactTime" title="No year selected">
									<option>Unknown</option>
								</select>
							</div>
							
						</div>
						<div id="satelliteDiv" class="selectDiv lowerDivs">
							<h2>RS Data</h2>
							<div class="input-prepend">
								<span class="add-on">Date</span>
								 <input type="text" placeholder="Date of the interpreted image">
								
							</div>
							<div class="input-prepend">
								<span class="add-on">Satellite</span> 
								<select id="satellite"
									class="selectpicker show-tick show-menu-arrow ">
									<option>Rapid Eye</option>
									<option>Landsat</option>
									<option>Quickbird</option>
									<option>Other</option>
								</select>
							</div>
						</div>

						<div class="form-actions" style="clear: both" class="lowerDivs">
							<button type="submit" class="btn btn-primary btn-small">Save
								changes</button>
						</div>


					</div>


				</div>

			</form>
		</div>
	
	<iframe style="display: none" id="dummy" src="about:blank"></iframe>
</body>
</html>
