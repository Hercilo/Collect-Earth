<!DOCTYPE html>
<html>
<head>
<title>LUCC Ethiopia</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="earthFiles/jquery/jquery.js"></script>
<script src="earthFiles/jquery/jquery-ui.js"></script>
<script src="earthFiles/jquery/jquery.blockUI.js"></script>
<script src="earthFiles/bootstrap/bootstrap.min.js"></script>
<script src="earthFiles/bootstrap/bootstrap-select.js"></script>

<link href="earthFiles/jquery/jquery-ui.css" rel="stylesheet" />
<link href="earthFiles/bootstrap/bootstrap.css" rel="stylesheet" />
<link href="earthFiles/bootstrap/bootstrap-select.css" rel="stylesheet" />

<!-- 
Values expected for Mongolia ( for the "HTTP parameters" -> "Collect format" conversion to work )

All inputs that have processable information ( hidden or otherwise) should start with "collect_" :

If the input is text then it should be followed by "text_"
If the input is a code (option in combo-box for instance) then it should be followed by "code_"
If the input is a date then it should be followed by "date_"
If the input is a coordinate then it should be followed by "coord_"  ( the value expected has the format "longitude,latitude" )
If the input is an integer then it should be followed by "integer_"
If the input is a boolean then it should be followed by "boolean_"

When multiple values can be sent ( in a multiple select for instance ) the data sent in the Http parameters has to be separated using " " ( a space ) 

So, for Ethiopia we expect these values :
collect_text_id
collect_coord_location
collect_text_operator ( filled in the earthSurveyService store method as the operator name is fetched through a properties file)
collect_entity_land_use[type].number_of_points
collect_code_interpretation_uncertainty
collect_boolean_presence_wetlands
collect_boolean_presence_planted_forest
collect_boolean_presence_woody_vegetation
collect_integer_topography_elevation
collect_code_topography_relief
collect_entity_accesibility[type].real_distance
collect_code_access_difficulty
collect_code_inventory_difficulty
collect_integer_human_impact_year
collect_date_rs_date
collect_code_rs_satellite
collect_text_notes
collect_boolean_actively_saved // Set this to true when the user saves the data by actively clicking in submit

collect_code_orientation
collect_real_slope_north_south
collect_real_slope_west_east

When a value has multiple values they will be  separated with "===" i.e.
collect_code_human_impact_type = "fire===logging===grazing"



Other inputs:
earth_skip_filled
 -->

<script>
	var collapsedState = false;

	var toggleCollapsed = function() {
		if (collapsedState == false) {
			$('#collapsableContents').hide();
			$('#collapseButton').attr("class", "icon-large icon-resize-full");
			collapsedState = true;
		} else {
			$('#collapsableContents').show();
			$('#collapseButton').attr("class", "icon-large icon-resize-small");
			collapsedState = false;
		}
	        
		document.getElementById('dummy').src = "about:blank";
	};

	var forceWindowCloseAfterDialogCloses = function($dialog) {
		$dialog.on("dialogclose", function(event, ui) {
			window.open("#$[next_id];flyto"); //balloonFlyto - annoying to have the balloon open, doesn't let you see the plot
		});
	}
	
	// To be used by the method that saves the data automatically when the user interacts with the form
	// DO NOT REMOVE
	var ajaxTimeout = null; 
	
	var ajaxDataUpdate = function(){
		
		var actively_saved = $("input[id=collect_boolean_actively_saved]").val();
		// Only update automatically when the data has not been correctly saved before
		if( actively_saved == 'false' ){
			// Set a two second timeout so that the data is only sent to the server if the user stops clicking for over one second
			clearTimeout(ajaxTimeout);
			ajaxTimeout = setTimeout(function() {
				var $form = $("#formAll");
		
				var data = $("#formAll").serialize();			
							
				$.ajax({
					data : data,
					type : $form.attr("method"),
					url : $form.attr("action"),
					dataType : 'json'
				});
			},100);
		}
	};
	
	var enableSelect = function( selectName, enable ){ //#elementsCover
		if( enable == true  ){
			 $(selectName).prop('disabled',false);
		}else{
			 $(selectName).prop('disabled',true);
		}
		$(selectName).selectpicker('refresh');
	}
	
	var toggleDependantSelect = function( parentSelect, nameDependantSelect ){ //#elementsCover
		var elementSelected = false;
		$( parentSelect + " option:selected").each(function () {        
			elementSelected = true;    
		});  

		enableSelect( nameDependantSelect, elementSelected );
	}

	var activateLandUseDivs = function( landUse ){
		 var selectedValue = landUse.val();
		 
		 $('.tab-pane').hide(); // Hide all land use divs
		 $('#tab_'+selectedValue).show();// Show the div for the actual selected land use
		 
		 if( selectedValue=='noData'){
			 $('#commonDivs').hide();
		 }else{
			 $('#commonDivs').show();
		 }
		 
		 if( selectedValue != 'settlement'){
			 $('.settlementDiv').show();
		 }else{
			 $('.settlementDiv').hide();
		 }
		 
		 if( selectedValue != 'forest'){
			 $('#trees_element').show();
		 }else{
			 $('#trees_element').hide();
		 }
	}
	
	var showError = function( input ) {
		$(input).closest(".control-group").addClass("error");
	}
	
	var updateTotalCount = function(){
		
		var totalPoints = 0;
		var foundCharsInInput = false;
		$(".validateMax").each( function(){
			var closestControlGroup = $(this).closest(".control-group");
			if( $(this).val().match('^(0|[1-9][0-9]*)$')){
				totalPoints = totalPoints + parseInt( $(this).val()  ,  10  );				
				closestControlGroup.removeClass("error");
			}else if( $(this).val() !='' ){
				closestControlGroup.addClass("error");
				foundCharsInInput = true;
			}else{
				closestControlGroup.removeClass("error");
			}
		});
		
		var div = $("#countPoints");
		
		if( foundCharsInInput ){
			div.html("Errors in the input")
		}else{
			div.html("Total dots allocated : " + totalPoints + "/25")
		}
		
		if( totalPoints == 25 && !foundCharsInInput){
			div.removeClass('alert-error');
			div.addClass('alert-success');
			
			$("#submitButton").removeAttr("disabled");    
			
		}else{
			div.removeClass('alert-success');
			div.addClass('alert-error');
			
			$("#submitButton").attr("disabled", "disabled");
		}
		
		
	}
	
	var fillDataWithJson = function(json) {

		$.each(json, function(key, value) {
			
			// Do this for every key there might be different tryopes of elements with the same key than a hidden input
			if ($("input[name=\'" + key + "\']").length == 1) {
				$("input[name=\'" + key + "\']").val(value);
			}
			
			if ($("textarea[name=\'" + key + "\']").length == 1) {
				$("textarea[name=\'" + key + "\']").val(value);
			} else if ($("select[name=\'" + key + "\']").length == 1) {
				
				var values = value.split("===");
				$("select[name=\'" + key + "\']").selectpicker('val',	values);
				
			}else if( $('#'+key+'_group').length == 1 ){ // button group exists
				
				var values = value.split("===");
				for (var i = 0; i < values.length; i++) {
					//$('#'+key+'_group .btn[value='+value+']').button('toggle'); // set the class to "active" on the chosen values
					if( $('#'+key+'_group .btn[value=\''+value+'\']').length == 1){
						var toggleButton = $('#'+key+'_group .btn[value=\''+value+'\']');
						toggleButton.button('toggle');
						if( key == "collect_code_land_use" ){
							activateLandUseDivs( toggleButton );
						}
					}
				}
				
			}
			
			updateTotalCount();
			
			if( key == "earth_skip_filled" && value == 'true'){
				$('#earth_skip_filled').attr('checked', value);				
			}
			
		});
			
	}
	
		
	var initializeChangeEventSaver = function(){
		
		//$(".btn-group").find("button").click(function(){
		$(".btn").click(function(){
			var groupId = $(this).closest("div").attr("id");
			 
			var suffixLength =  "_group".length;
			
			if( groupId && groupId.length > suffixLength ){
				
				 var value = $(this).val();
				// When we expect data sucha as "0;collect_code_deforestation_reason=burnt"
				 var values = value.split(";");
				
				 var idLength = groupId.length - suffixLength;
				 var hiddenInputId = groupId.substring(0,  idLength );
				 $('#'+hiddenInputId).val( values[0] );// give the hidden input the same value as the button that just was clicked
				 
				 if( $('.'+hiddenInputId+'_dependant').length > 0 ){
					var dependants =$('.'+hiddenInputId+'_dependant:hidden');
					// Reset inputs
					$('input.'+hiddenInputId+'_dependant:hidden').each( function(){
						$(this).val('');
					});
					
					//Reset buttons
					$(':button.'+hiddenInputId+'_dependant').each( function(){
						$(this).removeClass('active');
					});
				 }
				 
				// If there is an extra value "collect_code_deforestation_reason=burnt"
				 if( values.length == 2 ){
					 var extraValues = values[1].split("=");
					 $('#'+extraValues[0]).val( extraValues[1] );
				 }
				 ajaxDataUpdate();
			}
			
		});
		
		$('.landUseTypeSelector').find("button").click( function(e){
			var selectedUseType = e.target;
			var value = selectedUseType.value;
			$("input[id=collect_code_land_use_type]").val(value);
			ajaxDataUpdate();
		});
		
		// SAVING DATA WHEN DATA CHANGES
		// Bind event to Before user leaves page with function parameter e
		// The window onbeforeunload or onunload events do not work in Google Earth
		// OBS! The change event is not fired for the hidden inputs when the value is updated through jQuery's val()
		$('input[name^=collect], select[name^=collect], button[name^=collect]').change(
				function(e){
					ajaxDataUpdate();
				}
		);
		
		$('.validateMax').change(
				function(e){
					updateTotalCount();
				}
		);
		
	}
	
	var interpretJsonSaveResponse = function(json) {
		if (json.type == 'warning') {
			$('#succ_mess').css("color", "yellow").html(json.message);
		} else if (json.type == 'success' && json.valid_data && json.valid_data == 'false' ) {
			
			var message = "";
			
			$.each(json, function(key, value){
				if( key.indexOf("validation_") == 0 ){
					message += value + "<br>";
				}
			});
			
			$('#succ_mess').css("color", "red").html(message);
			
			// Resest the "actively saved" parameter to false so that it is not sent aw true when the user fixes the validation
			$("input[id=collect_boolean_actively_saved]").val('false');
			
			
		} else if (json.type == 'success') {
			$('#succ_mess').css("color", "green").html(json.message);
			forceWindowCloseAfterDialogCloses($("#dialogSuccess"));
		} else if (json.type == 'error'){
			$('#succ_mess').css("color", "red").html(json.message);
		}
		$("#dialogSuccess").dialog("open");
	}

	var checkIfPlacemarkAlreadyFilled = function(formName, chechCount ) {

		data = $(formName + " :input[value]").serialize();

		$.ajax({
			data : data,
			type : "POST",
			url : "$[host]placemarkInfo",
			//url: "http://127.0.0.1:8020/earth/placemarkInfo",
			dataType : 'json',
			timeout : 5000
		}).fail( function(jqXHR, textStatus, errorThrown) {
			
			if( chechCount < 3 ){
				chechCount = chechCount + 1;
				checkIfPlacemarkAlreadyFilled( formName, chechCount );
			}else{
				$('#succ_mess').css("color", "red").html("The Collect Earth server is not running!");
				$("#dialogSuccess").dialog("open");
				initializeChangeEventSaver();
			}
			
		}).done( function(json){
				if( json.collect_boolean_actively_saved == 'true' && json.collect_text_id != 'testPlacemark'){ // 
					
					$('#succ_mess').css("color", "red").html( "The data for this placemark has already been filled");
					$("#dialogSuccess").dialog( "open" );
					
					if( json.earth_skip_filled && json.earth_skip_filled == 'true'){
						forceWindowCloseAfterDialogCloses($("#dialogSuccess"));
					}
				}
				// Pre-fills the form and after that initilizes the change event listeners for the inputs
				fillDataWithJson(json);
				initializeChangeEventSaver();
			});
	}
	
	var submitForm = function($form, submitCounter ){
		var data = $form.find('input, select, textarea, button').serialize();
		
		var request = $.ajax({
					data : data,
					type : $form.attr("method"),
					url : $form.attr("action"),
					dataType : 'json',
					timeout : 5000,
					beforeSend : function() {			
						$.blockUI({ message : 'Sumitting data..' });
					}
				}).done( function(json) {
						interpretJsonSaveResponse(json);
				}).fail( function(jqXHR, textStatus, errorThrown) {	
					if( submitCounter < 3 ){
						submitCounter = submitCounter + 1;
						submitForm( $form, submitCounter );
					}else{
						$('#succ_mess').css("color","red").html("Cannot save the data, the Collect Earth server is not running! ");
						$("#dialogSuccess").dialog("open");
					}
				}).always( function() {
						$.unblockUI();
				});
	}

	$(document)
			.ready(
					function() {

						// Declares the Jquery Dialog ( The Bootstrap dialog does not work in Google Earth )
						$("#dialogSuccess").dialog({
							modal : true,
							autoOpen : false,
							buttons : {
								Ok : function() {
									$(this).dialog("close");
								}
							}
						});

						// Mark the selects as "bootstratp-select" enabled 
						$('.selectpicker').selectpicker();
									
						
						checkIfPlacemarkAlreadyFilled('#formAll', 0);
						
						// SAVING DATA WHEN USER SUBMITS
						$('#formAll')
								.submit(
										function(e) {
											
											e.preventDefault();

											clearTimeout(ajaxTimeout); // So that the form is not save twice if the user clicks the submit button before the auto-save timeout has started
											
											// Mark this as the "real submit" (as opposed when saving data just because the user closes the window) so we can show the placemark as interpreted
											$("input[id=collect_boolean_actively_saved]").val("true");

											submitForm( $(this), 0 );
														}
									);
						
					});
</script>
<style type="text/css">

#toolbar {
	padding: 4px;
	display: inline-block;
	margin: 1px;
	width:96%;
}

body {
	font-family: "Trebuchet MS", "Helvetica", "Arial", "Verdana",
		"sans-serif";
}

.capsuleCat {
    border: 1px solid #AED0EA;
    color: #222222;
    font-weight: bold;
    background-color: #e9f3f9;
}


.label-over {
    background-color: #EEEEEE;
    border: 1px solid #CCCCCC;
    display: inline-block;
    font-size: 12px;
    font-weight: normal;
    height: 12px;
    line-height: 10px;
    min-width: 16px;
    padding: 4px 5px;
    text-align: center;
    text-shadow: 0 1px 0 #FFFFFF;
    width: auto;
    margin-bottom: 5px;
	margin-top: 5px;
	border-top-left-radius: 8px;
	border-top-right-radius: 8px;
	border-bottom-left-radius: 8px;
	border-bottom-right-radius: 8px;
	display : inline-block;
}

.firstElementToggle{
    border-bottom-left-radius: 4px !important;
    border-top-left-radius: 4px !important;
    margin-left: 0 !important;
}

.lastElementToggle{
    border-bottom-right-radius: 4px !important;
    border-top-right-radius: 4px !important;
}
.add-on {
	min-width: 110px !important;
	max-width: 130px !important;
	text-align : left !important;
}

.input-prepend .add-on, .input-prepend .btn {
    margin-left: 4px;
}

label {
	display: inline;
}

hr {
	margin: 5px;
}


.bootstrap-select:not([class*="span"]) {
    width: 170px;
}

.bootstrap-select {
    width: 170px\9; /*IE8 and below*/
}

.ui-dialog-titlebar-close {
    background-image: url(earthFiles/img/close.png) !important;
    background-position: left top !important;
}

.btn-primary {
    background-color: #003dda !important;
}

.btn-primary.active, .btn-warning.active, .btn-danger.active, .btn-success.active, .btn-info.active, .btn-inverse.active {
   	color: rgba(255, 255, 255, 0.45) !important;
   	
}

.earthDiv{
	width: 560px;
}

</style>

</head>

	<div id="dialogSuccess">
		
			<span class="ui-icon ui-icon-circle-check"
				style="float: left; margin: 0 7px 70px 0;"> </span>
			<div id="succ_mess"></div>
		
	</div>
	
<body>

	<form id="formAll" method="POST" action="$[host]saveData">
	<div id="contentDiv" class="earthDiv" style="height:600px; overflow : auto;">

				<input type="hidden" id="collect_coord_location" 
					name="collect_coord_location" value="$[latitude],$[longitude]" />
					
				<input type="hidden" id="collect_integer_elevation" 
					name="collect_integer_elevation" value="$[elevation]" />
				<input type="hidden" id="collect_code_orientation" 
					name="collect_code_orientation" value="$[orientation]" />
				<input type="hidden" id="collect_real_slope_north_south" 
					name="collect_real_slope_north_south" value="$[slopeNorthSouth]" />
				<input type="hidden" id="collect_real_slope_west_east" 
					name="collect_real_slope_west_east" value="$[slopeWestEast]" />
					
				<input type="hidden" id="collect_text_id"
					name="collect_text_id" value="$[id]" />
				<input type="hidden" id="collect_code_interpretation_uncertainty" name="collect_code_interpretation_uncertainty"/>
				
				<input type="hidden"
					id="collect_boolean_presence_wetlands" name="collect_boolean_presence_wetlands"/> 
				<input type="hidden"
					id="collect_boolean_presence_planted_forest" name="collect_boolean_presence_planted_forest"/> 
					
				<input type="hidden"
					id="collect_boolean_presence_woody_vegetation" name="collect_boolean_presence_woody_vegetation"/>
					
				<input type="hidden" id="collect_code_topography_relief" name="collect_code_topography_relief" />
					
				<input type="hidden" id="collect_code_access_difficulty" name="collect_code_access_difficulty" />					
					
				<input type="hidden" id="collect_code_inventory_difficulty" name="collect_code_inventory_difficulty"/> 		
							
				<input type="hidden" id="collect_boolean_actively_saved"
					name="collect_boolean_actively_saved" value="false" />
					
				<input type="hidden" id="collect_code_rs_satellite"
					name="collect_code_rs_satellite"  />
			

				<div style="background-image: url(earthFiles/img/Open-foris-banner2.jpg); height:47px;width:450px;clear:none;">
					
					<span style="float: right;display:inline;margin-top:5px;" >
					
					<img src="earthFiles/img/ethiopia.png" border="0" style="vertical-align:bottom;"/>
					<img src="earthFiles/img/fao-logo.png" border="0" style="vertical-align:bottom;"/>
					
					<!-- 				
					Shirinking functionality removed!!!
					<button class="btn btn-link" onclick="toggleCollapsed(); return false;"><i  class="icon-large icon-resize-small" id="collapseButton"></i></button>				
					 -->
					</span>
				</div>
				<div id="collapsableContents">
					<div >
						<div id="toolbar" class="capsuleCat ui-corner-all"
							style="width: 96%">
							<h5>Land Use/Cover - ID-TRACT: $[id] </h5>
													
							<div class="label-over">Land Use/Cover Classes (indicate the number of points falling in each LUCC 1-25 )</div>
							
							<div class="control-group">
								<table>
									<tr>
										<td>
											<div class="control-group" style="display:inline-block">
											<div class="input-prepend">
													<span class="add-on">Nat Forest cc=0%</span> 
													<input type="text" name="collect_entity_land_use[no_cover_forest].integer_number_of_points" id="collect_entity_land_use[no_cover_forest].integer_number_of_points" class="input-mini validateMax"/>
														
												</div>
											</div>
										</td>
										<td>
											<div class="control-group" style="display:inline-block">
											<div class="input-prepend">
													<span class="add-on">Nat Forest cc&lt;50%</span> 
													<input type="text" name="collect_entity_land_use[sparse_forest].integer_number_of_points" id="collect_entity_land_use[sparse_forest].integer_number_of_points" class="input-mini validateMax"/>
											</div>
											</div>
	
										</td>
									</tr>
									<tr>
										<td>									
											<div class="control-group" style="display:inline-block">
												<div class="input-prepend">
														<span class="add-on">Nat Forest cc&gt;=50%</span> 
														<input type="text" name="collect_entity_land_use[dense_forest].integer_number_of_points" id="collect_entity_land_use[dense_forest].integer_number_of_points" class="input-mini validateMax"/>
															
												</div>
											</div>
										</td>
										<td>
											<div class="control-group" style="display:inline-block">
												<div class="input-prepend">
														<span class="add-on">Planted Forest</span> 
														<input type="text" name="collect_entity_land_use[planted_forest].integer_number_of_points" id="collect_entity_land_use[planted_forest].integer_number_of_points" class="input-mini validateMax"/>
															
												</div>
											</div>
										</td>
									</tr>
										
									<tr><td colspan="2"><hr/></td></tr>
									<tr>
										<td>
											<div class="control-group" style="display:inline-block">
												<div class="input-prepend">
														<span class="add-on">Other land cc=0%</span> 
														<input type="text" name="collect_entity_land_use[no_cover_other_land].integer_number_of_points" id="collect_entity_land_use[no_cover_other_land].integer_number_of_points" class="input-mini validateMax"/>
												</div>
											</div>
										</td>
										<td>
											<div class="control-group" style="display:inline-block">
												<div class="input-prepend">
														<span class="add-on">Other land cc&gt;50%</span> 
														<input type="text" name="collect_entity_land_use[sparse_other_land].integer_number_of_points" id="collect_entity_land_use[sparse_other_land].integer_number_of_points" class="input-mini validateMax"/>
												</div>
											</div>
										</td>
									</tr>
									
									<tr>
									
										<td colspan="2">
											<div class="control-group" style="display:inline-block">
											<div class="input-prepend">
													<span class="add-on">Other land cc&gt;=50%</span> 
													<input type="text" name="collect_entity_land_use[dense_other_land].integer_number_of_points" id="collect_entity_land_use[dense_other_land].integer_number_of_points" class="input-mini validateMax"/>
														
											</div>
											</div>
											<hr/>
										</td>
										
									</tr>
										
									<tr>
										<td>
										
											<div class="control-group" style="display:inline-block">
											<div class="input-prepend">
													<span class="add-on">Other wooden land</span> 
													<input type="text" name="collect_entity_land_use[other_wooden_land].integer_number_of_points" id="collect_entity_land_use[other_woodland].integer_number_of_points" class="input-mini validateMax"/>
														
												</div>
											</div>
										</td>
										<td>
											<div class="control-group" style="display:inline-block">
											<div class="input-prepend">
													<span class="add-on">Inland Water</span> 
													<input type="text" name="collect_entity_land_use[inland_water].integer_number_of_points" id="collect_entity_land_use[inland_water].integer_number_of_points" class="input-mini validateMax"/>
														
											</div>
											</div>
										</td>
									</tr>
									<tr>
										<td>
										
											<div class="control-group" style="display:inline-block">
												<div class="input-prepend">
														<span class="add-on">Outside Country/Ocean</span> 
														<input type="text" name="collect_entity_land_use[outside_country_ocean].integer_number_of_points" id="collect_entity_land_use[outside_country_ocean].integer_number_of_points" class="input-mini validateMax"/>
															
												</div>
											</div>
										</td>
										<td>
											<div class="control-group" style="display:inline-block">
												<div class="input-prepend">
														<span class="add-on">Unknown</span> 
														<input type="text" name="collect_entity_land_use[unknown].integer_number_of_points" id="collect_entity_land_use[unknown].integer_number_of_points" class="input-mini validateMax"/>
															
												</div>
											</div>
										</td>
									</tr>
									<tr><td colspan="2">
									    <div class="alert alert-error" id="countPoints">
									    	No points allocated
		 								</div>
	    									
	    							</td></tr>
								</table>
							</div>
							<div class="label-over">Interpretation Uncertainty</div>
							<div class="control-group">			
								<div class="btn-group" data-toggle="buttons-radio" id="collect_code_interpretation_uncertainty_group">
									<button type="button"
										class="btn btn-primary"
										value="L">Low</button>
									<button type="button"
										class="btn btn-primary"
										value="M" >Medium</button>
									<button type="button"
										class="btn btn-primary"
										value="H" >High</button>
								</div>
							</div>
							<div class="label-over">Presence of Wetlands</div>
							<div class="control-group">			
								<div class="btn-group" data-toggle="buttons-radio" id='collect_boolean_presence_wetlands_group'>
									<button type="button"
										class="btn btn-primary "
										id="wetlandsPresent" value="true">YES</button>
									<button type="button"
										class="btn btn-primary "
										id="wetlandsNotPresent" value="false">NO</button>
								</div>
							</div>
							<div class="label-over">Presence of Planted Forest</div>
							<div class="control-group">			
								<div class="btn-group" data-toggle="buttons-radio" id='collect_boolean_presence_planted_forest_group'>
									<button type="button"
										class="btn btn-primary "
										id="plantedForestPresent" value="true" >YES</button>
									<button type="button"
										class="btn btn-primary "
										id="plantedForestNotPresent" value="false">NO</button>
								</div>
							</div>
							<div class="label-over">Presence of Woody Vegetation</div>
							<div class="control-group">			
								<div class="btn-group" data-toggle="buttons-radio"  id='collect_boolean_presence_woody_vegetation_group'>
									<button type="button"
										class="btn btn-primary "
										id="woodyVegetationPresent" value="true" >YES</button>
									<button type="button"
										class="btn btn-primary "
										id="woodyVegetationNotPresent" value="false">NO</button>
								</div>
							</div>
						</div>
								
						<div id="toolbar" class="capsuleCat ui-corner-all">
							<h5>Topography</h5>
							<div class="label-over">Relief</div>
							<div class="control-group">			
								<div class="btn-group" data-toggle="buttons-radio" id="collect_code_topography_relief_group">
									<button type="button"
										class="btn btn-primary"
										value="F" title="Plain, plateau or valley centre" >Flat</button>
									<button type="button"
										class="btn btn-primary"
										value="H" title="Smooth slopes">Hilly</button>
									<button type="button"
										class="btn btn-primary"
										value="M" title="Steep slopes">Mountanious</button>
								</div>
							</div>
							
					

							<div class="label-over">Proximity to closest infrastructure (in Km)</div>
					
							<div class="control-group">
									<div class="input-prepend">
										<span class="add-on">All-Weather road</span> 
										<input type="text" name="collect_entity_accesibility[all_weather_road].real_distance" id="collect_entity_accesibility[all_weather_road].real_distance" class="input-small"/>
											
									</div>
									<div class="input-prepend">
										<span class="add-on">Seasonal road</span> 
										<input type="text" name="collect_entity_accesibility[seasonal_road].real_distance" id="collect_entity_accesibility[seasonal_road].real_distance" class="input-small"/>
											
									</div>
									<div class="input-prepend">
										<span class="add-on">Trail</span> 
										<input type="text" name="collect_entity_accesibility[trail].real_distance" id="collect_entity_accesibility[trail].real_distance" class="input-small"/>
											
									</div>
									<div class="input-prepend">
										<span class="add-on">River, lake, pond</span> 
										<input type="text" name="collect_entity_accesibility[river_lake_pond].real_distance" id="collect_entity_accesibility[river_lake_pond].real_distance" class="input-small"/>
											
									</div>
									<div class="input-prepend">
										<span class="add-on">Town/city</span> 
										<input type="text" name="collect_entity_accesibility[town_city].real_distance" id="collect_entity_accesibility[town_city].real_distance" class="input-small"/>
											
									</div>
									<div class="input-prepend">
										<span class="add-on">Rural settlement</span> 
										<input type="text" name="collect_entity_accesibility[rural_settlement].real_distance" id="collect_entity_accesibility[rural_settlement].real_distance" class="input-small"/>
											
									</div>
							</div>
				
							<div class="label-over">Access difficulty</div>
					
							<div class="control-group">			
								<div class="btn-group" data-toggle="buttons-radio" id='collect_code_access_difficulty_group'>
									<button type="button"
										class="btn btn-primary "
										id="plantedForestPresent" value="L" >Low</button>
									<button type="button"
										class="btn btn-primary "
										id="plantedForestNotPresent" value="M">Medium</button>
									<button type="button"
										class="btn btn-primary "
										id="plantedForestNotPresent" value="H">High</button>
									<button type="button"
										class="btn btn-primary "
										id="plantedForestNotPresent" value="VH">Very High</button>
								</div>
							</div>
							
							<div class="label-over">Inventory difficulty</div>
					
							<div class="control-group">			
								<div class="btn-group" data-toggle="buttons-radio" id='collect_code_inventory_difficulty_group'>
									<button type="button"
										class="btn btn-primary "
										id="plantedForestPresent" value="L" >Low</button>
									<button type="button"
										class="btn btn-primary "
										id="plantedForestNotPresent" value="M">Medium</button>
									<button type="button"
										class="btn btn-primary "
										id="plantedForestNotPresent" value="H">High</button>
									<button type="button"
										class="btn btn-primary "
										id="plantedForestNotPresent" value="VH">Very High</button>
								</div>
							</div>
							<div id="toolbar" class="capsuleCat ui-corner-all">
				
							<h5>RS Data</h5>
				
							<div class="label-over">Satellite</div>
									<div class="control-group">
								    <div class="btn-group" data-toggle="buttons-radio" id="collect_code_rs_satellite_group">
									    <button type="button" class="btn btn-primary" value="rapidEye">Rapid Eye</button>
									    <button type="button" class="btn btn-primary" value="landsat">Landsat</button>
									    <button type="button" class="btn btn-primary" value="quickbird">Quickbird</button>
									    <button type="button" class="btn btn-primary" value="digitalGlobe">Digital Globe</button>
									    <button type="button" class="btn btn-primary" value="spot">Spot</button>
									    <button type="button" class="btn btn-primary" value="other">Other</button>
								    </div>
								  <!--  <div class="ui-state-default ui-state-active ui-corner-all"> 
								    <div class="ui-icon ui-icon-circle-plus"></div>   <a href="#">I am clickable and selected</a></div>  
								    
								    <div class="ui-state-default ui-corner-all">  
	
	  								 <div class="ui-icon ui-icon-circle-plus"></div>  
	
	 								<a href="#">I am clickable but not selected</a></div>  -->
								    
							</div>
							<div class="label-over">Date</div>
								<div class="control-group">
									 	 <input type="text" id="collect_date_rs_date" name="collect_date_rs_date" placeholder="month/day/year">
								</div>
							</div>
							<div id="toolbar" class="capsuleCat ui-corner-all">
								<h5>Notes</h5>
								
								<div class="control-group">
									<textarea rows="3" id="collect_text_notes" name="collect_text_notes"></textarea>
								</div>
							</div>
					</div>
				</div>
		</div>
		<div class="earthDiv">
			<button id="submitButton" type="submit" class="btn btn-success" style="margin-left:25%;margin-right:25%;margin-top:3px;">SUBMIT &amp; VALIDATE</button>
			<!-- 
			COMMENT FOR NOW
			<div style="float:right">
			<label for="earth_skip_filled">Skip already filled plots</label> <input type="checkbox" id="earth_skip_filled" name="earth_skip_filled"/>
			</div>
			 -->
		</div>
		</div>
	</form>

	<iframe style="display: none" id="dummy" src="about:blank"></iframe>
	
</body>
</html>
